#!/bin/sh
set -e

if [ -n "${PROMETHEUS_MULTIPROC_DIR:-}" ]; then
    # Wipe old prometheus metrics files. This is mainly needed for container restarts
    find "$PROMETHEUS_MULTIPROC_DIR" -maxdepth 1 -type f -name '*.db' -delete
else
    # this should normally never happen, cause the env var is being set during docker build phase
    echo "WARN: PROMETHEUS_MULTIPROC_DIR is not set; skipping metrics cleanup." >&2
fi
